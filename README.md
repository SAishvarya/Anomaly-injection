# Anomaly-injection

Simulates anomaly scenarios for opentelemetry demo by toggling feature flags on and off, generating various types of anomalies (point, long, and multiple) and logging these anomalies to an Excel file.

Feature flags are loaded from a JSON file (FEATURE_FLAG_FILE) and initialized to False using the reset_feature_flags function, setting the starting state of all feature flags to off. The main function, random_scenario, randomly generates different scenarios based on a specified probability (ANOMALY_PROBABILITY). The scenarios include normal, where all feature flags are set to False; point anomaly, where a randomly chosen feature flag is turned on for a short duration and then turned off; long scenario anomaly (s_long), where a feature flag is turned on for a longer duration before being turned off; and multiple anomaly, where several feature flags are turned on simultaneously for a random duration before being turned off.

Anomalies are logged into an Excel workbook (EXCEL_FILE) with details such as the start time, end time, type of anomaly, and which feature flags were toggled. The logging is managed by the log_anomaly_to_excel function, which appends anomaly details to the Excel sheet. The code runs in an infinite loop, continuously generating new scenarios and logging them until manually stopped, using for _ in iter(int, 1). Finally, the Excel file is saved at the specified location (EXCEL_FILE) once the loop is manually stopped. This setup is useful for testing the impact of toggling feature flags in a controlled manner, simulating different anomaly types to assess how the application handles unexpected behaviors.
